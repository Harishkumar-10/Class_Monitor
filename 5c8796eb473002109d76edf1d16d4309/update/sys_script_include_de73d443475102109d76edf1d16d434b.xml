<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_script_include">
    <sys_script_include action="INSERT_OR_UPDATE">
        <access>public</access>
        <active>true</active>
        <api_name>x_568580_class_a_0.AttendanceReporter</api_name>
        <caller_access>1</caller_access>
        <client_callable>false</client_callable>
        <description/>
        <name>AttendanceReporter</name>
        <script><![CDATA[var AttendanceReporter = Class.create();
AttendanceReporter.prototype = {
    initialize: function() {},

    schData: function() {
        //var ch=new GlideRecord('x_568580_class_a_0_scheduled_classes');
        //ch.get();
    },

    attPresent: function() {
        //
    },

    attAbsent: function(subj, subSta) {
        var inhtm = "<table border=2><tr><th>Student</th><th>Absent</th></tr>";
        var sc = new GlideAggregate('x_568580_class_a_0_attendance_table');
        sc.addQuery('class_scheduled.subject', subj);
        sc.addQuery('status', 'absent');
        sc.addQuery('sub_status', subSta);
        sc.addAggregate('COUNT', 'student');
        sc.groupBy('student');
        sc.orderBy('class_schedule.scheduled_date');
        sc.query();
        while (sc.next()) {
            inhtm = inhtm + "<tr><td>" + sc.getDisplayValue('student') + "</td><td>" + sc.getAggregate('COUNT', 'student') + "</td></tr>";
        }

        inhtm = inhtm + "</table>";

        return inhtm;
    },

    attCounter: function(subj, stat) {
        var sc = new GlideAggregate('x_568580_class_a_0_attendance_table');
        sc.addQuery('class_scheduled.subject', subj);
        sc.addQuery('status', stat);
        sc.addAggregate('COUNT');
        sc.query();
        if (sc.next()) {
            return sc.getAggregate('COUNT');
        }

    },

    type: 'AttendanceReporter'
};]]></script>
        <sys_class_name>sys_script_include</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2024-04-05 16:53:36</sys_created_on>
        <sys_id>de73d443475102109d76edf1d16d434b</sys_id>
        <sys_mod_count>3</sys_mod_count>
        <sys_name>AttendanceReporter</sys_name>
        <sys_package display_value="Class Attendance Mointoring " source="x_568580_class_a_0">5c8796eb473002109d76edf1d16d4309</sys_package>
        <sys_policy>read</sys_policy>
        <sys_scope display_value="Class Attendance Mointoring ">5c8796eb473002109d76edf1d16d4309</sys_scope>
        <sys_update_name>sys_script_include_de73d443475102109d76edf1d16d434b</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2024-04-06 05:07:09</sys_updated_on>
    </sys_script_include>
</record_update>
